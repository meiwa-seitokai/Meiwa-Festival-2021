<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
	<meta http-equiv="Content-Security-Policy" content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
	<script src="components/loader.js"></script>
	<script src="lib/onsenui/js/onsenui.min.js"></script>

	<link rel="stylesheet" href="components/loader.css">
	<link rel="stylesheet" href="lib/onsenui/css/onsenui.css">
	<link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css">
	<link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">    <!-- bootstrapの実装 -->

	<script id=default>
   const applicationKey = 'fb9bdc1de88d2a7e66af9dce46c0b5211ace58c5921dc29e66e7e6ca3fc1435c';
   const clientKey = 'ab4bccaa1ac408bce96981836699d5a1b9b526becd34500a2dc83a9c35081c6c';
   const ncmb = new NCMB(applicationKey, clientKey); //APIキーの設定とSDK初期化

   document.addEventListener('show', function(event) {
     var page = event.target;
     var titleElement = document.querySelector('#toolbar-title');

     if (page.id === 'home') {

        //ページ遷移実装
        page.querySelector('#assign_number').onclick = function() {
          document.querySelector('#myNavigator').pushPage('g_assign_number.html', {animation: "slide"});};
        page.querySelector('#show_number').onclick = function() {
          document.querySelector('#myNavigator').pushPage('g_show_number.html', {animation: "slide"});};
        page.querySelector('#map').onclick = function() {
          document.querySelector('#myNavigator').pushPage('g_map.html', {animation: "slide"});};
        page.querySelector('#pamphlet').onclick = function() {
          document.querySelector('#myNavigator').pushPage('g_pamphlet.html', {animation: "slide"});};
        page.querySelector('#ope_login').onclick = function() {
          document.querySelector('#myNavigator').pushPage('operation.html', {animation: "slide"});};
        }

      if (page.matches('#situation')) {
        titleElement.innerHTML = '待ち状況';
      } else if (page.matches('#reception')) {
        titleElement.innerHTML = '受付';
      }
    });

    if (ons.platform.isIPhoneX()) {
      document.documentElement.setAttribute('onsflag-iphonex-portrait', '');
      document.documentElement.setAttribute('onsflag-iphonex-landscape', '');
    }
	</script>
</head>

<body>
  <ons-navigator swipeable id="myNavigator" page="home.html"></ons-navigator>

  <!-- ホーム画面 -->
  <!-- どこかに通知ボックス作りたい -->
  <ons-template id="home.html">
  <ons-page id="home">
  
    <ons-toolbar>
      <div class="center">明和祭2021</div>
    </ons-toolbar>

    <p>企画に並ぶ</p>
    <ons-button modifier="large" id="assign_number">
      整理券発番
    </ons-button>

    <p>企画に入場する</p>
    <ons-button modifier="large" id="show_number">      
      整理券提示
    </ons-button>

    <p>お役立ちメニュー</p>
    <ons-button modifier="large" id="map">      
      校内マップ
    </ons-button>
      
    <ons-button modifier="large" id="pamphlet">
      デジタルパンフレット
    </ons-button>
      
    <ons-button modifier="quiet" id="ope_login">      
      企画運営者モードにログインする
    </ons-button>

  </ons-page>
  </ons-template>


  <!-- 企画運営者モード -->
  <ons-template id="operation.html">
  <ons-page id="operation">

    <ons-toolbar>
      <div class="left"><ons-back-button>戻る</ons-toolbar-button></div>
      <div class="center">企画運営者モード</div>
    </ons-toolbar>

  </ons-page>
  </ons-template>
  
  <!-- 整理券発番 -->
	<ons-template id="g_assign_number.html">
  <ons-page id="g_assign_number">

		<ons-toolbar>
      <div class="left"><ons-back-button>戻る</ons-toolbar-button></div>
			<div class="center" id="toolbar-title"></div>
		</ons-toolbar>

		<ons-tabbar position="auto" swipeable="true" modifier="top-border">
			<ons-tab label="状況" page="situation.html" active>
			</ons-tab>
		  <ons-tab label="受付" page="reception.html">
			</ons-tab>
		</ons-tabbar>

	</ons-page>
  </ons-template>

  <!-- 予約状況 -->
	<ons-template id="situation.html">
	<ons-page id="situation">

		<ons-list>
      <ons-list-header>予約状況</ons-list-header>
      <ons-list-item id=ReserveSituation>予約はありません。</ons-list-item>
		</ons-list>

    <ons-button modifier="large" id="QR">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-camera-fill" viewBox="0 0 16 16">
      <path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"></path>
      <path d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"></path>
      </svg>
      QRコードを読み取る
    </ons-button>

	</ons-page>
	</ons-template>

  <!-- 予約確認画面 -->
  <ons-dialog id="ReserveCheck">
    (101HR)に予約を送信しますか？<br>
    (これは仮の文です)
    <ons-button id="LetSend" onclick="send()">
    OK!
    </ons-button>
  </ons-dialog>

  <!-- 発番するところ -->
	<ons-template id="reception.html">
	<ons-page id="reception">

		<p align=center;>(仮)</p>
    <div class="d-inline-flex p-2 ml-1 bd-highlight">
      <input type="button" value="発番する" class="btn btn-primary btn-lg btn-block" onclick="send()">
      <!--クリックしたらsend.jsに送る-->
    </div>

  </ons-page>
  </ons-template>

  <!-- 整理券提示 -->
  <ons-template id="g_show_number.html">
  <ons-page id="g_show_number">

    <ons-toolbar>
      <div class="left"><ons-back-button>戻る</ons-toolbar-button></div>
      <div class="center">発番済み整理券</div>
    </ons-toolbar>

  </ons-page>
  </ons-template>

  <!-- 校内マップ -->
  <ons-template id="g_map.html">
  <ons-page id="g_map">

    <ons-toolbar>
      <div class="left"><ons-back-button>戻る</ons-toolbar-button></div>
      <div class="center">校内MAP</div>
    </ons-toolbar>

  </ons-page>
  </ons-template>

  <!-- デジタルパンフレット -->
  <ons-template id="g_pamphlet.html">
  <ons-page id="g_pamphlet">

    <ons-toolbar>
      <div class="left"><ons-back-button>戻る</ons-toolbar-button></div>
      <div class="center">デジタルパンフレット</div>
    </ons-toolbar>

  </ons-page>
  </ons-template>
<script src="Reserve.js"></script>    <!-- スプリクト読み込み -->
</body>
</html>